# TODO test modifier balancing
# TODO slave costs

##########################################
# Implants
##########################################

trait_cybernetic_combat = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_loyalty_circuits.dds"

    opposites = { "trait_cybernetic_emotion" "trait_cybernetic_processor" "trait_cybernetic_conform" }

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

	modifier = {
		army_morale = 0.1
        army_damage_mult = 0.05
	}
}

trait_cybernetic_conform = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_propaganda_machines.dds"

    opposites = { "trait_cybernetic_emotion" "trait_cybernetic_processor" "trait_cybernetic_combat" }

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

	modifier = {
		pop_government_ethic_attraction = 0.15
        species_empire_size_mult = -0.05
	}
}

trait_cybernetic_emotion = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_emotion_emulators.dds"

    opposites = { "trait_cybernetic_processor" "trait_cybernetic_combat" "trait_cybernetic_conform" }

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

	modifier = {
        pop_happiness = 0.05
        planet_jobs_unity_produces_mult = 0.05
	}
}

trait_cybernetic_processor = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_learning_algorithms.dds"

    opposites = { "trait_cybernetic_emotion" "trait_cybernetic_combat" "trait_cybernetic_conform"}

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

	modifier = {
		species_leader_exp_gain = 0.1
        planet_jobs_specialist_produces_mult = 0.05
	}
}

##########################################
## Framework
##########################################

trait_cybernetic_agricultural = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_harvesters.dds"

    opposites = { "trait_cybernetic_industrial" "trait_cybernetic_military" "trait_cybernetic_compact" }

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

	modifier = {
		planet_jobs_food_produces_mult = 0.05
	}
}

trait_cybernetic_compact = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_double_jointed.dds"

    opposites = { "trait_cybernetic_industrial" "trait_cybernetic_agricultural" "trait_cybernetic_military" }

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

	modifier = {
		pop_housing_usage_mult = -0.05
	}
}

trait_cybernetic_industrial = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_power_drills.dds"

    opposites = { "trait_cybernetic_agricultural" "trait_cybernetic_military" "trait_cybernetic_compact"}

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

	modifier = {
		planet_jobs_minerals_produces_mult = 0.05
	}
}

trait_cybernetic_military = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_durable.dds"

    opposites = { "trait_cybernetic_industrial" "trait_cybernetic_agricultural" "trait_cybernetic_compact" }

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

	modifier = {
        army_health = 0.1
        army_damage_mult = 0.05
	}
}

##########################################
## Environmental
##########################################

trait_cybernetic_arctic = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_efficient_processors.dds"

    allowed_planet_classes = { pc_arctic }
    opposites = { "trait_cybernetic_ocean" "trait_cybernetic_desert" "trait_cybernetic_tomb" }

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        has_trait = trait_pc_arctic_preference
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
        has_trait = trait_pc_arctic_preference
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

    custom_tooltip_with_modifiers = trait_cybernetic_arctic_tooltip
    
    triggered_pop_modifier = {
		potential = {
			exists = planet
			planet = { is_planet_class = pc_arctic }
		}
		planet_jobs_food_produces_mult = 0.05
		planet_jobs_minerals_produces_mult = 0.05
		planet_jobs_energy_produces_mult = 0.05
    }
    
    # To make it be able to evaluate habitability of planet it has not settled yet. Only applies to this species
	triggered_planet_growth_habitability_modifier = {
		potential = {
			NOT = { has_climate = cold }
			is_ideal = no
		}
		pop_environment_tolerance = -0.3
    }
    modifier = {
		pc_arctic_habitability = 0.15
	}
}

trait_cybernetic_desert = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_efficient_processors.dds"

    allowed_planet_classes = { pc_desert }
    opposites = { "trait_cybernetic_ocean" "trait_cybernetic_arctic" "trait_cybernetic_tomb" }

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        has_trait = trait_pc_desert_preference
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
        has_trait = trait_pc_desert_preference
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

    custom_tooltip_with_modifiers = trait_cybernetic_desert_tooltip

    triggered_pop_modifier = {
		potential = {
			exists = planet
			planet = { is_planet_class = pc_desert }
		}
		planet_jobs_food_produces_mult = 0.05
		planet_jobs_minerals_produces_mult = 0.05
		planet_jobs_energy_produces_mult = 0.05
    }
    
    # To make it be able to evaluate habitability of planet it has not settled yet. Only applies to this species
	triggered_planet_growth_habitability_modifier = {
		potential = {
			NOT = { has_climate = dry }
			is_ideal = no
		}
		pop_environment_tolerance = -0.3
    }
    modifier = {
		pc_desert_habitability = 0.15
	}
}

trait_cybernetic_ocean = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_efficient_processors.dds"

    allowed_planet_classes = { pc_ocean }
    opposites = { "trait_aquatic" "trait_cybernetic_desert" "trait_cybernetic_arctic" "trait_cybernetic_tomb" }

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        has_trait = trait_pc_ocean_preference
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
        has_trait = trait_pc_ocean_preference
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

    custom_tooltip_with_modifiers = trait_cybernetic_ocean_tooltip
    
    triggered_pop_modifier = {
		potential = {
			exists = planet
			planet = {
				OR = {
					is_planet_class = pc_ocean
					has_modifier = flooded_habitat
				}
			}
		}
		planet_jobs_food_produces_mult = 0.05
		planet_jobs_minerals_produces_mult = 0.05
		planet_jobs_energy_produces_mult = 0.05
    }
    
    # To make it be able to evaluate habitability of planet it has not settled yet. Only applies to this species
	triggered_planet_growth_habitability_modifier = {
		potential = {
			NOR = {
				has_climate = wet
				has_modifier = flooded_habitat
			}
			is_ideal = no
		}
		pop_environment_tolerance = -0.3
    }
    triggered_planet_growth_habitability_modifier = {
		potential = {
			has_modifier = flooded_habitat
		}
		pop_environment_tolerance = 0.1
	}
    modifier = {
		pc_ocean_habitability = 0.15
	}
}

trait_cybernetic_tomb = {
    cost = 1
    sorting_priority = 15
    icon = "gfx/interface/icons/traits/trait_robot_efficient_processors.dds"

    allowed_planet_classes = { pc_nuked }
    opposites = { "trait_cybernetic_ocean" "trait_cybernetic_desert" "trait_cybernetic_arctic" "trait_survivor" "trait_presapient_irradiated" }

    initial = no
    randomized = no

    species_potential_add = {
        has_trait = trait_cybernetic
        has_trait = trait_pc_nuked_preference
        from = {
            has_technology = tech_cyro_bio_synth_interface
        }
    }

    species_possible_merge_add = {
        has_trait = trait_cybernetic
        has_trait = trait_pc_nuked_preference
    }

	allowed_archetypes = { BIOLOGICAL LITHOID }

    custom_tooltip_with_modifiers = trait_cybernetic_tomb_tooltip
    
    triggered_pop_modifier = {
		potential = {
			exists = planet
			planet = { is_planet_class = pc_nuked }
		}
		planet_jobs_food_produces_mult = 0.05
		planet_jobs_minerals_produces_mult = 0.05
		planet_jobs_energy_produces_mult = 0.05
    }
    
    # To make it be able to evaluate habitability of planet it has not settled yet. Only applies to this species
	triggered_planet_growth_habitability_modifier = {
		potential = {
			OR = {
                has_climate = cold
                has_climate = dry                
                has_climate = wet
            }
			is_ideal = no
		}
		pop_environment_tolerance = -0.3
    }
    modifier = {
		pc_nuked_habitability = 0.15
	}
}